---
layout: post
title: 리액트에 대한 설명
excerpt: "페이스북 개발팀에서 위의 이슈를 해결하기 위한 아이디어를 냈는데 데이터가 변경될때 어떤 변화를 줄지 고민하는것이 아니라 기존 뷰를 날리고 처음부터 새로 렌더링하는 방식을 고안했다.
이렇게 하면 구조가 매우 간단해지고 코드양도 줄어든다. 어떤 변화를 줄지 신경 안써도 되고 뷰가 어떻게 생길지 선언 하기만하면 데이터에 변화가 일어날때 기존것은 날리고 정해진 규칙에 따라 새로 렌더링을 하면 되기 때문이다.
하지만 위의 방식대로 한다면 CPU사용이나 메모리점유율 끊김현상등 우려되는 부분이 적지 않다.
페이스북 개발 팀이 위의 방식으로 최대한 성능을 아끼고 안정적인 유저 경험을 제공하면서 구현하려고 하는것이 바로 리액트이다."
categories: [react]
comments: true
---

**자바스크립트만으로도 규모가 큰 애플리케이션을 제작할 수 있는 시대가 왔다.**

대규모 애플리케이션 중 프론트엔드 사이드에서 돌아가는 애플리케이션 구조를 관리하기 위해  지금까지 많은 프레임워크가 이를 다른 관점에서 해결하려고 노력해왔다.

이 프레임워크들은 MVC, MVVM, MVW아키텍처로 애플리케이션을 구조화하는데, 공통점은 모델과 뷰가 존재한다. 

모델은 데이터를 관리하는 영역이며 뷰는 유저에게 보이는 영역이다. 프로그램이 유저로부터 어떤 작업을 받게되면 컨트롤러는 모델데이터를 조회,수정을 하고 변경된 사항을 뷰에 반영한다.

<img src="http://www.tutorialsteacher.com/Content/images/mvc/mvc-architecture.png">

업데이트 항목에 따라 변경될 부분을 찾아 변경을 반영하는 규칙을 정하는 작업은 간단하다. 하지만 애플리케이션 규모가 커지면 상당히 복잡해지고 제대로 관리하지 않으면 성능저하의 원인이 될 수 있다. 

##### 리액트의 등장
페이스북 개발팀에서 위의 이슈를 해결하기 위한 아이디어를 냈는데 데이터가 변경될때 어떤 변화를 줄지 고민하는것이 아니라 기존 뷰를 날리고 처음부터 새로 렌더링하는 방식을 고안했다.
이렇게 하면 구조가 매우 간단해지고 코드양도 줄어든다. 어떤 변화를 줄지 신경 안써도 되고 뷰가 어떻게 생길지 선언 하기만하면 데이터에 변화가 일어날때 기존것은 날리고 정해진 규칙에 따라 새로 렌더링을 하면 되기 때문이다.

하지만 위의 방식대로 한다면 CPU사용이나 메모리점유율 끊김현상등 우려되는 부분이 적지 않다.

페이스북 개발 팀이 위의 방식으로 최대한 성능을 아끼고 안정적인 유저 경험을 제공하면서 구현하려고 하는것이 바로 **리액트**이다.

##### 이해  
리액트는 자바스크립트 라이브러리로 유저 인터페이스를 만드는데 사용한다. 오직 **뷰에만 집중**한 라이브러리이다.

##### 컴포넌트  
컴포넌트는 템플릿과는 다른 개념이다. 템플릿은 데이터셋이 주어지면 HTML형식을 문자열로 반환하지만, 컴포넌트는 복합적인 개념이다. 컴포넌트는 재사용 가능한 API로 여러가지 기능들을 내장하고 있다. 컴포넌트 하나에서 해당 컴포넌트의 생김새와 작동 방식을 정의한다.

##### 초기렌더링  
모든 UI관련 프레임워크, 라이브러리는 초기 렌더링이 필요하다. 리액트에서는 render함수로 이를 다루며 render함수는 컴포넌트가 어떻게 생겼는지 정의하는 역할을 한다. html형식의 문자열을 반환하지 않고, 뷰가 어떻게 생겼는지 어떻게 작동하는지 정보를 지닌 **객체를 반환**한다. 컴포넌트 내부에는 다른 컴포넌트가 존재할 수 있으며 render함수를 실행하면 그 내부에 존재하는 컴포넌트들도 재귀적으로 렌더링하게된다. 

최상위 컴포넌트의 렌더링 작업이 끝나면 가지고 있는 정보를 사용하여 HTML마크업을 만들고 실제 페이지의 DOM요소 안에 주입하게 된다.

컴포넌트를 실제 렌더링할 때는 먼저 문자열 형태의 HTML코드를 생성한 후 특정 DOM에 그 내용을 주입하면 이벤트가 적용된다.

##### 조화 과정
리액트에서 뷰를 업데이트할 때는 "조화 과정을 거친다"라고 하는것이 정확한 표현이다. 컴포넌트에서 변화가 있을 때 우리가 보기에는 변화에 따라 변형되는 것처럼 보이지만 실제로는 새로운 요소로 교체하기 때문이다.

위 작업 또한 render함수가 진행하며 컴포넌트는 데이터가 업데이트 되었을때 단순히 그 값만 수정하는 것이 아니라 새로운 데이터를 가지고 render함수를 다시 호출한다. 그 후 이전에 render함수가 만들었던 컴포넌트 정보와 현재 render함수가 만든 컴포넌트 정보를 비교하게 되는데 두 가지 뷰를 최소한의 연산으로 비교 후 둘의 차이를 알아내 DOM트리를 업데이트 하게된다.

루트 노드부터 시작하여 전체를 리렌더링하는 것처럼 보이지만 최적의 자원을 사용하여 이를 수행하게 된다. 

<img src="https://cdn.auth0.com/blog/dombench/reactdom.png" alt="" />

##### DOM
Document Object Model의 약어로 객체로 문서 구조를 표현하는 방법이다.
웹 브라우저는 DOM을 활용해 객체에 자바스크립트와 CSS를 적용한다. DOM은 트리 형
태라서 특정 node를 첮거나, 제거, 삽입이 가능하다.

DOM은 동적UI에 최적화되어 있지 않응 치명적 단점이 있다. HTMl자체는 정적이지만 자바스크립트를 사용해서 동적으로 만들 수 있다. 하지만 대규모 웹 애플리케이션에서 DOM에 직접 접근하여 변화를 주거나 하면 성능이 저하 될 수 있다. 사실 DOM자체는 빠르지만 DOM에 변화가 일어나면 브라우저가 CSS를 재연산하고 레이아웃을 구성하고 페이지를 리페인트하게 되는데 이 부분에서 성능이 낮아지는 것이다.

업데이트가 잦으면 웹브라우저 엔진이 웹페이지를 새로 그려서 성능이 느려질 수 있다. DOM을 최소한으로 조작하여 작업을 처리하는 방식으로 개선 할 수 있느데 리액트는 virtual DOM방식을 사용하여 DOM업데이트를 추상화하여 DOM처리 횟수를 최소화하고 효율적으로 렌더링을 진행한다.

##### Virtual DOM
Virtual DOM을 사용하면 실제 DOM에 접근하여 조작하는 대신, 추상화한 자바스크립트 객체를 구성하여 사용한다. 실제 DOM의 가벼운 사본과 비슷하다.

리액트에서 데이터가 업데이트되어 실제 DOM에 반영될때는 다음 절차를 밟는다.

1. 데이터를 업데이트하면 전체UI를 Virtual DOM에 리렌더링.
2. 이전 Virtual DOM에 있던 내용과 현재 내용을 비교.
3. 바뀐 부분만 실제 DOM에 적용 

##### 오해  
> 우리는 다음 문제를 해결하려고 리액트를 만들었습니다.<br>지속적으로 데이터가 변화하는 대규모 애플리케이션 구축하기

가상돔을 사용한다고 해서 무조건 빠른것은 아니다. 적절한 곳에 사용해야 리액트의 진가를 발휘할 수 있다. 리액트와 가상돔이 제공하는것은 업데이트 처리의 간결성이다. UI를 업데이트하는 과정에서의 복잡함들을 해소하고 손쉽게 업데이트에 접근할 수 있도록 하는 것이다.
<br>

###### 참고서적
> 리액트를 다루는 기술 - 김민준